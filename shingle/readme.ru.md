# Shingle

Коллекция алгоритмов шинглирования текста для последующей обработки [LSH](../lsh) алгоритмами (SimHash, MinHash, ...).

**Shingle** (иногда называют **n-граммой** в текстовом анализе) — это последовательность токенов (обычно слов или символов),
используемая для представления текста или данных в алгоритмах сравнения схожести, таких как MinHash и SimHash.

Шинглы предоставляют следующие преимущества:

* **Учет контекста**: Одиночные слова (или символы) могут не передавать смысл, а шинглы помогают ухватить последовательности.
* **Устойчивость к перестановкам**: Если два текста имеют общие шинглы, они, скорее всего, семантически близки, даже если слова немного перемешаны.
* **Использование в MinHash/SimHash**: Оба алгоритма работают с множествами шинглов, чтобы быстро оценивать схожесть документов.

Шинглирование - это только начальный этап similarity estimation. Обычно после этого применяется [LSH](../lsh) алгоритмы
для получения векторов и далее уже к векторам применяются [similarity](../similarity) алгоритмы, например Hamming distance
или Cosine similarity.

## Реализованные алгоритмы
- **Символьный шинглер ([Char](char.go))** – последовательности символов.
    - Пример для текста `"hello"` с шинглом размера 3 (`3-gram`):  
      `["hel", "ell", "llo"]`
- **Словесный шинглер ([Word](word.go))** – последовательности слов.
    - Пример для предложения `"the quick brown fox"` с шинглом размера 2 (`2-shingle`):  
      `["the quick", "quick brown", "brown fox"]`

## Использование

```go
package main

import (
	"fmt"

	"github.com/koykov/pbtk/shingle"
)

const (
	text  = "Stock markets hit record highs?!"
	clean = ",.!?" // clear set
	k    = 2      // shingle size
)

func main() {
	shw := shingle.NewWord[string](k, clean)
	fmt.Printf("%#v\n", shw.Shingle(text)) // []string{"Stock markets", "markets hit", "hit record", "record highs"}

	shc := shingle.NewChar[string](k, clean)
	fmt.Printf("%#v\n", shc.Shingle(text)) // []string{"St", "to", "oc", "ck", "k ", " m", "ma", "ar", "rk", "ke", "et", "ts", "s ", " h", "hi", "it", "t ", " r", "re", "ec", "co", "or", "rd", "d ", " h", "hi", "ig", "gh", "hs"}
}
```

## Практические советы
- **Выбор размера (k)**:
    - Маленький `k` (1-2) лучше для общего анализа.
    - Большой `k` (3-5) лучше для точного сравнения, но требует больше ресурсов.
- **Перекрытие шинглов**: Чем больше общих шинглов у двух текстов, тем выше их семантическая близость.
- **Предобработка**: Часто перед генерацией шинглов текст приводят к нижнему регистру, удаляют стоп-слова и знаки препинания.

## Заключение

Shingle — это фундаментальная концепция в алгоритмах сравнения текстов. MinHash и SimHash используют шинглы для
эффективной оценки схожести документов без попарного сравнения всех слов.
